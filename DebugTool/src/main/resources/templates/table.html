<html>
<head>
    <title>Google Charts Line Chart Example</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">


 		const urlParams = new URLSearchParams(window.location.search);
//  		const statsIdValue = urlParams.get('stats_id');

//        const periodValue = urlParams.get('period');

//		alert(periodValue);
		alert(1);
  //      var title = periodValue.replace(/_/g, ' ').toLowerCase();
		alert(2);

//        google.charts.load('current', { 'packages': ['corechart'] });
//        google.charts.setOnLoadCallback(fetchAndDrawChart);

        google.charts.load('current', { 'packages': ['table'] });
        google.charts.setOnLoadCallback(fetchAndDrawChart);

//                   url: 'http://localhost:8085/tokensView' + window.location.search, // replace with the actual URL
//		   			 url: 'http://localhost:8085/chart' + window.location.search, // replace with the actual URL				

        function fetchAndDrawChart() {
            // Fetch JSON data from the URL using Ajax
            $.ajax({
				url: 'day_tokens1' + window.location.search, // replace with the actual URL				
                dataType: 'json',
                success: function (jsonData) {
 					var jsonString = JSON.stringify(jsonData);
					alert(jsonString);
                    drawChart(jsonData);
                },
                error: function () {
                    console.error('Error fetching JSON data');
                }
            });
        }

        function drawChart(jsonData) {
            // Create the DataTable
            var data = new google.visualization.DataTable(jsonData);
            var options = {
                title: 'Chart of ',
                curveType: 'linear',
                legend: { position: 'bottom' },
      			hAxis: {
                    format: 'MMM dd, yyyy HH:mm:ss', // Customize the date and time format
                    gridlines: { count: -1 } // Adjust the number of gridlines as needed
                }                
            };
//            var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
//            chart.draw(data, options);
            
//			var data = new google.visualization.DataTable(jsonDataObj);        
            var table = new google.visualization.Table(document.getElementById('chart_div'));
            table.draw(data, {showRowNumber: true});
            
            
        }
    </script>
</head>
<body>
    <div id="chart_div" style="width: 100%; height: 100vh;"></div>
</body>
</html>